<krpano>

  <!-- open dialog when clicking on panorama -->
	<events name="addSensorDialog"
          onclick="js(krpano.addSensorDialog());" />

  <!-- add sensor to clicked location -->
  <action name="addsensor">
    addhotspot(%1);
    trace('id: ', %1);
    set(hotspot[%1].url, /libs/krpano/plugins/sensor-128.png);
    set(hotspot[%1].ath, %2);
    trace('ath: ', hotspot[%1].ath);
    set(hotspot[%1].atv, %3);
    trace('atv: ', hotspot[%1].atv);
    set(hotspot[%1].sensorTable, %4);
		set(hotspot[%1].sensors, %5);
		trace('sensors: ', hotspot[%1].sensors);
    set(hotspot[%1].scale, 0.7);
    trace('scale: ', hotspot[%1].scale);
    set(hotspot[%1].alpha, 0.4);
    set(hotspot[%1].zoom, true);
    set(hotspot[%1].onhover, set(alpha,1.0);showtext(get(hotspot[%1].sensorTable)););
    set(hotspot[%1].onclick, set(alpha,1.0);showtext(get(hotspot[%1].sensorTable), mobile););
    set(hotspot[%1].onout, set(alpha,0.4));
  </action>

	<!-- update hotspot sensor table -->
  <action name="updatesensors">
    trace('old_id: ', %1);
		trace('new_id: ', %2);
    trace('new_sensors: ', %4);
		addsensor(%2, hotspot[%1].ath, hotspot[%1].atv, %3, %4);
		removehotspot(%1);
  </action>

</krpano>
